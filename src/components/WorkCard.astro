---
import type { CollectionEntry } from 'astro:content';

interface Props {
	work: CollectionEntry<'work'>;
}

const { work } = Astro.props;
---

<a href={`/work/${work.id}`} class="post-container work-experience-card">
	<div class="post-header">
		<div class="work-company-line">
			<h3 class="work-company-name">{work.data.company}</h3>
			{(work.data.toptal || work.data.location) && (
				<div class="work-meta-indicator">
					<svg viewBox="0 0 16 16" class="meta-dot" aria-hidden="true">
						<path d="M8 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4Z"></path>
					</svg>
					{work.data.toptal ? (
						<div class="toptal-section">
							<svg height="16" viewBox="0 0 23 32" width="16" xmlns="http://www.w3.org/2000/svg" class="toptal-icon" aria-labelledby="toptal-emblem-icon-label">
								<title id="toptal-emblem-icon-label">Toptal emblem</title>
								<path d="m1323.82532 2153 7.29254 7.29278c.05306.04705.10612.09998.16507.15879l6.36107 6.36354-10.34632 10.29222 4.73985 4.74031-3.17169 3.15236-7.24537-7.24573c-.08254-.07645-.17097-.16467-.2594-.25289l-6.36107-6.35766 10.31095-10.25105-4.69859-4.69914zm4.61606 11.42731c-.09433-.02941-.18865-.02941-.28298 0-.09433.02353-.17686.07058-.34193.23525l-5.88945 5.86363c-.17096.17056-.21223.24701-.2417.34111-.02948.0941-.02948.1882 0 .2823.02947.09411.07664.17644.2417.34112l1.86883 1.87024c.17096.17056.2476.21173.34193.24114.09432.0294.18865.0294.28297 0 .09433-.02941.17686-.07058.33604-.23526l5.88944-5.86362c.17097-.17056.21224-.24702.24171-.34112.02948-.0941.02948-.1882 0-.2823-.02358-.0941-.07074-.17644-.23581-.34111l-1.86882-1.87025c-.17097-.17055-.24761-.21172-.34193-.24113z" fill="currentColor" fill-rule="evenodd" transform="translate(-1315 -2153)"></path>
							</svg>
							<span class="toptal-text">Via Toptal</span>
						</div>
					) : (
						<div class="location-section">
							<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="location-icon">
								<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
								<circle cx="12" cy="10" r="3"></circle>
							</svg>
							<span class="location-text">{work.data.location}</span>
						</div>
					)}
				</div>
			)}
		</div>
		<span class="post-date">{work.data.duration}</span>
	</div>
	<span class="work-position-title">{work.data.title}</span>
	<span>{work.data.description}</span>
</a>

<style>

	.work-company-line {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		flex-wrap: wrap;
	}

	.work-company-name {
		font-size: 1.25rem;
		font-weight: 600;
		margin: 0;
		line-height: 1.4;
		color: var(--primary-lightest);
	}

	.work-position-title {
		font-weight: 500;
		font-size: 1rem;
	}

	.work-meta-indicator {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		color: var(--text-secondary);
		font-size: 0.875rem;
	}

	.meta-dot {
		width: 16px;
		height: 16px;
		fill: #9ca3af;
		flex-shrink: 0;
	}

	.toptal-section {
		display: flex;
		align-items: center;
		gap: 0.375rem;
	}

	.toptal-icon {
		width: 16px;
		height: 16px;
		color: #204ecf;
		opacity: 0.8;
	}

	.toptal-text {
		font-size: 0.875rem;
	}

	.location-section {
		display: flex;
		align-items: center;
		gap: 0.375rem;
	}

	.location-icon {
		width: 16px;
		height: 16px;
		color: var(--text-secondary);
		opacity: 0.8;
	}

	.location-text {
		font-size: 0.875rem;
		color: var(--text-secondary);
	}
</style>
